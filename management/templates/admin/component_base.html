{% extends "admin/admin_base.html" %}

{% block page_title %}{{ component_meta.title }}{% endblock %}
{% block header_title %}{{ component_meta.title }}{% endblock %}

{% block extra_head %}
  {{ block.super }}
  <style>
    .component-filter{
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      margin-bottom:16px;
      align-items:flex-end;
    }
    .component-filter label{
      font-size:11px;
      font-weight:700;
      color:var(--muted);
      display:flex;
      flex-direction:column;
      gap:4px;
      min-width:160px;
    }
    .component-filter select{
      padding:8px 10px;
      border-radius:8px;
      border:1px solid var(--line2);
      background:#fff;
      font-size:12px;
    }
    .component-filter button{
      padding:8px 16px;
      border:none;
      border-radius:8px;
      background:var(--blue);
      color:#fff;
      font-weight:700;
      cursor:pointer;
    }
    .component-pagination{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      margin-top:16px;
      padding-top:12px;
      border-top:1px solid var(--line2);
      font-size:12px;
      color:var(--muted);
    }
    .component-pagination .page-controls{
      display:flex;
      gap:8px;
    }
    .component-pagination .page-link{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:6px 10px;
      border-radius:8px;
      border:1px solid var(--line2);
      background:#fff;
      color:var(--text);
      text-decoration:none;
      font-weight:600;
      min-width:64px;
    }
    .component-pagination .page-link.is-disabled{
      opacity:0.5;
      pointer-events:none;
    }
  </style>
{% endblock %}

{% block admin_screens %}
  {% if component_data.filters %}
    <form method="get" class="component-filter">
      {% for filter in component_data.filters %}
        <label>
          {{ filter.label }}
          <select name="{{ filter.param }}">
            {% for option in filter.options %}
              <option value="{{ option.value }}" {% if option.value == filter.selected %}selected{% endif %}>
                {{ option.label }}
              </option>
            {% endfor %}
          </select>
        </label>
      {% endfor %}
      <button type="submit">Apply</button>
    </form>
  {% endif %}
  {% include component_meta.template with component_meta=component_meta component_data=component_data %}
  {% if component_data.page_obj and component_data.page_obj.paginator.num_pages > 1 %}
    <div class="component-pagination" aria-label="Pagination">
      <div class="page-status">
        Page {{ component_data.page_obj.number }} of {{ component_data.page_obj.paginator.num_pages }}
      </div>
      <div class="page-controls">
        {% if component_data.page_obj.has_previous %}
          <a class="page-link" href="?{{ component_data.page_query_prefix }}page={{ component_data.page_obj.previous_page_number }}">Previous</a>
        {% else %}
          <span class="page-link is-disabled">Previous</span>
        {% endif %}
        {% if component_data.page_obj.has_next %}
          <a class="page-link" href="?{{ component_data.page_query_prefix }}page={{ component_data.page_obj.next_page_number }}">Next</a>
        {% else %}
          <span class="page-link is-disabled">Next</span>
        {% endif %}
      </div>
    </div>
  {% endif %}
{% endblock %}
